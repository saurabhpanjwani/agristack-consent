type: object
required:
  - meta
  - main
properties:
  meta:
    description: Meta attributes of the API request
    type: object
    required:
      - requestId
      - timestamp
      - callbackUrl
      - timeout
    properties:
      requestId:
        description: Unique identifier of the API request, set by the API client
        $ref: '../attributes/requestId.yaml'
      timestamp:
        description: Request timestamp, in ISO 8601 format
        $ref: '../attributes/timestamp.yaml'
      callbackUrl:
        description: Client's callback URL to be used by the server
        type: string
        format: uri
        example: 'http://aiu1-callback.com'
      timeout: 
        description: The time after which the request, if left unserved by the server, is deemed to have expired
        type: string
        format: date-time
        example: '2023-10-02T23:59:59Z'
  main: 
    description: Main attributes of the API request
    type: object
    required:
      - consent
      - signature
      - attributesSought
    properties: 
      consent:
        description: Object defining the consent against which data is being requested. If the data requester is an AIU, this is
          a consent artifact obtained by that AIU from a CM. If the data requester is a CM that is requesting for asset identifiers,
          this is an object containing parameters relevant only to such requests.
        oneOf:
          - $ref: '../schemas/consentArtifact.yaml'
          - $ref: '../schemas/assetIdentifierParams.yaml'
      attributesSought:
        description: Set of attributes that the client AIU intends to fetch in the current data request
        type: object
        properties: 
          profileAttributes: 
            description: List of profile data attributes whose value the client AIU intends to fetch
            type: array
            example: '[NAME, DOB]'
            items: 
              description: Name of the attribute under consideration
              type: string
              enum: 
                - NAME
                - GENDER
                - DOB
                - ADDRESS
                - CASTE
                  # - FARMER_TYPE # Cultivator or owner?
                  # - FARM_COUNT
                  # - FARM_LIST
          assetAttributes: 
            description: List of asset data attributes whose data the client AIU intends to fetch
            type: array
            example: '[FARM_DATA, CROP_DATA]'
            items:
              # type: object
              description: Name of the attribute under consideration
                # Object that defines each item in the list of asset data attributes whose values the client AIU intendes to fetch
                # required:
                # - attributeName
                  # - seasonName
                  # properties:
                  # attributeName: 
                  # description: Name of the attribute under consideration
              type: string
              enum: 
                - FARM_DATA
                - CROP_DATA
                      # seasonName:
                      #   description: Name of the season for which the attribute's value is sought
                      #   type: object
                      #   required:
                      #     - seasonType
                      #     - year
                      #   properties:
                      #     seasonType:
                      #       description: Type of the season 
                      #       type: string
                      #       enum: 
                      #         - KHARIF
                      #         - RABI
                      #         - ZAID
                      #     year:
                      #       description: Year of consideration
                      #       type: string
                      #       format: year
                      #       example: '2023'
