type: object
required:
  - meta
  - main
properties:
  meta:
    description: Meta attributes of the API request
    type: object
    required:
      - requestId
      - timestamp
      - transactionId
    properties:
      requestId:
        description: Unique identifier of the API request, set by the API client
        type: string
        example: 'cm1-8323294'
        maxLength: 99
      timestamp:
        description: Request timestamp, in ISO 8601 format
        type: string
        format: date-time
        example: '2023-10-01T23:59:59Z'
      transactionId:
        description: Transaction ID linked to the original consent request, in whose response this consent object is being created
        type: string
        example: 'cm1-29184739230238'
        maxLength: 99
  main:
    description: Main attributes of the API request
    type: object
    required:
      - result
    properties:
      result:
        description: Result indicating whether consent was granted or not
        type: string
        enum:
          - CONSENT_GRANTED
          - CONSENT_DENIED
        example: 'CONSENT_GRANTED'
      artifactId: 
        description: Identifier for the consent artifact 
        type: string
        example: 'cm1-r3t84jdfw034'
        maxLength: 99
      artifact:
        description: Consent artifact
        type: object
        required:
          - farmerId
          - aipId
          - aiuId
          - cmId
          - purposeCode
          - dateRange
          - attributes
          - status
        properties:
          farmerId:
            description: Identifier of the farmer whose data is being shared
            type: string
            pattern: '^\d{11}$'
            example: 12341234123
          aipId:
            description: Identifier of the agricultural information provider (AIP) maintaining the data being shared
            type: string
            example: 'KA'
          aiuId:
            description: Identifier of the agricultural information user (AIU) receiving data 
            type: string
            example: 'AIU1'
          cmId:
            description: Identifier of the consent manager (CM) who collected consent
            type: string
            example: 'CM1'
          purposeCode:
            description: Purpose code indicating the intended purpose of data sharing 
            type: string
            example: 'CREDIT_KCC'
            enum:
              - CREDIT_KCC
              - CREDIT_OTHER
              - INPUT_SUBSIDY
              - INSURANCE
              - ADVICE
          dateRange:
            description: Upper and lower bounds on the time-instants for which data access is permitted
            type: object
            required: 
              - from
              - to
            properties:
              from:
                description: Lower bound of the date range
                type: string
                format: date
                example: '2023-10-01'
              to:
                description: Upper bound of the date range
                type: string
                format: date
                example: '2023-10-02'
          attributes:
            description: Set of data attributes which are to be shared
            type: object
            properties:
              profileAttributes:
                description: List of profile attributes to be shared
                type: array
                example: '[NAME, FARMER_TYPE]'
                items:
                  type: string
                  enum:
                    - NAME
                    - GENDER
                    - DOB
                    - ADDRESS
                    - CASTE
                    - FARMER_TYPE  
              assetAttributes:
                description: List of asset attributes to be shared
                type: array
                items:
                  type: object
                  properties:
                    assetType:
                      description: Type of asset
                      type: string
                      example: 'FARM'
                      enum:
                        - FARM
                        - LIVESTOCK
                    assetAttributes: 
                      description: The list of attributes that can be sought per asset type, some attributes apply only to certain types of assets (e.g., crops sown applies only to farms)
                      type: array
                      example: '[ASSET_COUNT, ASSET_IDENTIFIERS, CROPS_SOWN]'
                      items: 
                        type: string
                        enum:
                          - ASSET_COUNT # flag indicating whether ownership of the asset is revealed or not
                          - ASSET_IDENTIFIERS
                          - ASSET_OWNERSHIP_TYPE # rented or owned
                          - CROPS_SOWN
                          - SOWN_AREA



